[toc]

# 约瑟夫环
## 题目
1. 一群猴子要选新猴王。新猴王的选择方法是：让N只候选猴子围成一圈，
从某位置起顺序编号为1~N号。从第1号开始报数，每轮从1报到3，凡报到3的猴子即退出圈子，
接着又从紧邻的下一只猴子开始同样的报数。如此不断循环，最后剩下的一只猴子就选为猴王。
请问是原来第几号猴子当选猴王？

## 题目
1. 0，1，...，n-1这n个数字排成一个圆圈，从数字0开始每次从这个圆圈里删除第m个数字。
求出这个圆圈里剩下的最后一个数字。

### 分析

定义函数f(n,m)，表示每次在n个数字（0，1，...，n-1）中每次删除第m个数字后最后剩下的数字。

在n个数字中，假设第一个被删除的数字为k，那么删除k之后剩下的n-1个数字为0~k-1，k+1~n-1，
并且下一次删除从数字k+1开始计数。第二个序列最后剩下的数字也就是我们要求的数字。
于是我们对于剩下的n-1个数字重新编号，k+1编号为0，k+2编号为1，...，0编号为n-k-1，1编号为n-k，
k-1编号为n-2，假设f(n-1, m) = x，即n-1个数中，每次删除第m个，最后剩下的数字编号为x，
那么这个x就对应着原序列（n个数）中的编号(x + m) % n。可以得到递推关系：
    
    f(n,m)=0, n=1
    f(n,m)=[f(n-1,m) + m]%n n>1

### 说明
问题1：假设我们已经知道11个人时，胜利者的下标位置为6。那下一轮10个人时，胜利者的下标位置为多少？ 
答：其实吧，第一轮删掉编号为3的人后，之后的人都往前面移动了3位，胜利这也往前移动了3位，所以他的下标位置由6变成3。

问题2：假设我们已经知道10个人时，胜利者的下标位置为3。那下一轮11个人时，胜利者的下标位置为多少？ 
答：这可以看错是上一个问题的逆过程，大家都往后移动3位，所以f(11,3)=f(10,3)+3f(11,3)=f(10,3)+3。不过有可能数组会越界，所以最后模上当前人数的个数，f(11,3)=（f(10,3)+3）%11f(11,3)=（f(10,3)+3）%11 

问题3：现在改为人数改为N，报到M时，把那个人杀掉，那么数组是怎么移动的？ 
答：每杀掉一个人，下一个人成为头，相当于把数组向前移动M位。若已知N-1个人时，胜利者的下标位置位f(N−1,M)f(N−1,M)，则N个人的时候，就是往后移动M为，(因为有可能数组越界，超过的部分会被接到头上，所以还要模N)，既f(N,M)=(f(N−1,M)+M)%nf(N,M)=(f(N−1,M)+M)%n 
注：理解这个递推式的核心在于关注胜利者的下标位置是怎么变的。每杀掉一个人，其实就是把这个数组向前移动了M位。然后逆过来，就可以得到这个递推式。


## 参考
- [golang 算法-约瑟夫环](https://blog.csdn.net/qq_36183935/article/details/80785825)
- [约瑟夫环之二(用递归的思想解决Josephus问题)](https://blog.csdn.net/wusuopubupt/article/details/18214999)
- [约瑟夫环问题](https://blog.csdn.net/AC__GO/article/details/81178540?utm_source=blogxgwz7)
- [知乎上小米变相约瑟夫环面试题微软解法的golang代码](https://my.oschina.net/raddleoj/blog/1944161)